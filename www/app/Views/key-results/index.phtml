<?php
/**
 * @var $args array
 */

$typeExists = false;

if (isset($args['oldData']['type'])) {
    $typeExists = true;
}
?>

<section class="cards center-card">
    <div class="card-body">
        <form method="POST" id="key-result-form">
            <h2><i class="fa-solid fa-plus"></i> Resultado Chave</h2>
            <hr class="separator">
            <div class="form-group">
                <label for="title"><span>Título</span></label>
                <input type="text" placeholder="Informe o Título" name="title" id="title" class="input-form" value="<?= $args['oldData']['title'] ?? '' ?>">
            </div>
            <div class="form-group">
                <label for="objective"><span>Objetivo</span></label>
                <select name="objective_id" id="objective_id">
                    <?php foreach ($args['objectives'] as $objective) : ?>
                        <option value="<?= $args['oldData']['objectiveID'] ?? $objective['id']; ?>"><?= $args['oldData']['title'] ?? $objective['title']; ?></option>
                    <?php endforeach;?>
                </select>
            </div>
            <div class="form-group">
                <label for="description"><span>Descrição</span></label>
                <input type="text" placeholder="Informe a Descrição" id="description" class="input-form" name="description" value="<?= $args['oldData']['description'] ?? '' ?>">
            </div>
            <div class="form-group">
                <label for="type"><span>Tipo</span></label>
                <select id="type" name="type">
                    <option <?= $typeExists && $args['oldData']['type'] == 1 ? 'selected' : '' ?> value="1">Milestone</option>
                    <option <?= $typeExists && $args['oldData']['type'] == 2 ? 'selected' : '' ?> value="2">Porcentagem</option>
                </select>
            </div>
            <div class="form-group">
                <input type="text" class="hide input-form" name="id" value="<?= $args['oldData']['id'] ?? '' ?>">
            </div>
            <div class="action">
                <button class="btn btn-success" type="submit"><i class="fa-solid fa-plus"></i></button>
                <a class="btn btn-primary" href="<?= $_SERVER['HTTP_REFERER']; ?>"><i class="fa-solid fa-arrow-left"></i></a>
            </div>
        </form>
    </div>
</section>

<script src="../../assets/js/key-results.js?v=<?= time() ?>" type="text/javascript"></script>