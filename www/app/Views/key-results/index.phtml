<?php
/**
 * @var $args array
 */

$typeExists = false;

if (isset($args['oldData']['type'])) {
    $typeExists = true;
}
?>

<main class="container">
    <section>
        <form method="POST" id="key-result-form">
            <h2>Adicionar Resultado Chave</h2>
            <div class="form-group">
                <label for="title"><span>Título</span></label>
                <input type="text" name="title" id="title" class="input-form" value="<?= $args['oldData']['title'] ?? '' ?>">
            </div>
            <div class="form-group">
                <label for="objective"><span>Objetivo</span></label>
                <select name="objective_id" id="objective_id">
                    <?php foreach ($args['objectives'] as $objective) : ?>
                        <option value="<?= $args['oldData']['objectiveID'] ?? $objective['id']; ?>"><?= $args['oldData']['title'] ?? $objective['title']; ?></option>
                    <?php endforeach;?>
                </select>
            </div>
            <div class="form-group">
                <label for="description"><span>Descrição</span></label>
                <input type="text" id="description" class="input-form" name="description" value="<?= $args['oldData']['description'] ?? '' ?>">
            </div>
            <div class="form-group">
                <label for="type"><span>Tipo</span></label>
                <select id="type" name="type">
                    <option <?= $typeExists && $args['oldData']['type'] == 1 ? 'selected' : '' ?> value="1">Milestone</option>
                    <option <?= $typeExists && $args['oldData']['type'] == 2 ? 'selected' : '' ?> value="2">Porcentagem</option>
                </select>
            </div>
            <div class="form-group">
                <input type="text" class="hide input-form" name="id" value="<?= $args['oldData']['id'] ?? '' ?>">
            </div>
            <button class="btn" type="submit"><i class="fa-solid fa-plus"></i> Adicionar</button>
            <a class="btn" href="<?= $_SERVER['HTTP_REFERER']; ?>"><i class="fa-solid fa-arrow-left"></i> Voltar</a>
        </form>
    </section>
</main>

<script src="../../assets/js/key-results.js" type="text/javascript"></script>