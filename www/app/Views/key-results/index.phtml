<?php
/**
 * @var $args array
 */

$typeExists = false;

if (isset($args['oldData']['type'])) {
    $typeExists = true;
}
?>

<main class="container">
    <section>
        <h1>Adicionar key results</h1>

    </section>

    <section>
        <form method="POST" id="key-result-form">
            <div class="">
                <label for="title">
                    <span>Título: </span>
                    <input type="text" name="title" id="title" value="<?= $args['oldData']['title'] ?? '' ?>">
                </label>
            </div>

            <div class="">
                <label for="objective">
                    <span>Objetivo: </span>
                    <select name="objective_id" id="objective_id">
                        <?php foreach ($args['objectives'] as $objective) : ?>
                            <option value="<?= $args['oldData']['objectiveID'] ?? $objective['id']; ?>"><?= $args['oldData']['title'] ?? $objective['title']; ?></option>
                        <?php endforeach;?>
                    </select>
                </label>
            </div>

            <div class="">
                <label for="description">
                    <span>Descrição: </span>
                    <input type="text" id="description" name="description" value="<?= $args['oldData']['description'] ?? '' ?>">
                </label>
            </div>

            <div class="">
                <label for="type">
                    <span>Tipo: </span>
                    <select id="type" name="type">
                        <option <?= $typeExists && $args['oldData']['type'] == 1 ? 'selected' : '' ?> value="1">Milestone</option>
                        <option <?= $typeExists && $args['oldData']['type'] == 2 ? 'selected' : '' ?> value="2">Porcentagem</option>
                    </select>
                </label>
            </div>

            <div class="">
                <label for="type">
                    <input style="display: none" type="text" name="id" value="<?= $args['oldData']['id'] ?? '' ?>">
                </label>
            </div>

            <div>
                <button class="btn" type="submit">
                    Enviar
                </button>
            </div>
        </form>
    </section>
</main>

<script src="../../assets/js/key-results.js" type="text/javascript"></script>