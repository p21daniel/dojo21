<?php
/**
 * @var $args array
 */
?>

<nav>

</nav>

<main class="container">
    <section class="meus-objetivos">
        <h1>Meus objetivos</h1>
        <?php foreach ($args['objectives'] as $objective): ?>
            <?php if(!$objective['deleted_at']): ?>
                <div class="objetivo">
                    <?php $keyResults = $args['keyResultsModel']->list($objective['id']); ?>
                    <h3>Título: <?php echo $objective['title']; ?></h3>
                    <h4>Descrição: <?php echo $objective['description']; ?></h4>
                    <button class="btn" id="objective_remove_button" value="<?= $objective['id'];?>">Remover</button>
                    <button class="btn" id="objective_edit_button" value="<?= $objective['id'];?>">Editar</button>

                    <h4>Key Results:</h4>
                    <ul>
                        <?php foreach ($keyResults as $keyResult): ?>
                            <?php if(!$keyResult['deleted_at']): ?>
                                <li><strong><?php echo $keyResult['title']; ?></strong></li>
                                <ul>
                                    <li><strong>Descrição</strong>: <?=$keyResult['description']?></li>
                                    <li><strong>Tipo</strong>: <?= $keyResult['type'] == 1 ? 'Milestone' : 'Porcentagem'   ?></li>
                                </ul>
                                <button class="btn" id="key_result_remove_button" value="<?= $keyResult['id'];?>">Remover</button>
                                <button class="btn" id="key_result_edit_button" value="<?= $keyResult['id'];?>">Editar</button>
                            <?php endif; ?>
                        <?php endforeach; ?>
                    </ul>
                </div>
            <?php endif; ?>
            <hr>
        <?php endforeach; ?>
    </section>
</main>

<script src="../../assets/js/key-results.js" type="text/javascript"></script>
<script src="../../assets/js/objective.js" type="text/javascript"></script>